@model VLN2.ViewModels.ProjectViewModel
@{
    ViewBag.Title = @Model.Project.Name;
}

@section outsideContainer{
    <div class="sidebar">
        <div class="sidebar-project">
            <h2 class="text-center">@Model.Project.Name</h2>    
            <ul id="files">
                @foreach (var file in Model.Project.ProjectFiles)
                {
                    <li>
                        @file.Name
                    </li>
                }
            </ul>
            <form id="createfile">
                <input id="newfile" type="text" class="form-control" />
                <button class="btn" type="submit">Create File</button>
            </form>
            <div class="users-access">
                <label>Users:</label>
                @foreach (var user in Model.Project.ApplicationUsers)
                {
                    <p>@user.Displayname (@user.UserName)</p>
                }
            </div>
        </div>
        <div class="sidebar-chat">
            <div id="discussion"></div>
        </div>
        <div class="sidebar-chat-form">
            <form id="sendmessage">
                <div class="input-group">
                    <input type="text" class="form-control" id="message" placeholder="Message" autocomplete="off">
                    <span class="input-group-btn">
                        <button class="btn btn-send" type="submit"><span class="glyphicon glyphicon-envelope"></span></button>
                    </span>
                </div>
            </form>
        </div>
    </div>
    <div id="editor">
        @if (@Model.Project.ProjectFiles.Count > 0)
        {
            @Model.Project.ProjectFiles.Single().Content
        }
    </div>
}

@section scripts {
    <!--Script references. -->
    <!--The jQuery library is required and is referenced by default in _Layout.cshtml. -->
    <!--Reference the SignalR library. -->
    <script src="~/Scripts/jquery.signalR-2.2.1.min.js"></script>
    <!--Reference the autogenerated SignalR hub script. -->
    <script src="~/signalr/hubs"></script>

    <script src="~/Scripts/src-min-noconflict/ace.js" type="text/javascript" charset="utf-8"></script>

    <!--SignalR script to update the chat page and send messages.-->
    <script src="~/Scripts/Hubs/chat.js"></script>
    <script src="~/Scripts/Hubs/code.js"></script>
}